<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Game Card Factory — Law 5 Referee</title>

  <link rel="icon" href="images/favicon.svg" type="image/svg+xml" />
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="css/fast-card-factory.css">
  <link rel="stylesheet" href="css/mapping-ui.css">

  <!-- PDF + FileSaver + JSZip -->
  <script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
</head>

<body class="admin-page">

<header>
  <h1>Law Five Referee</h1>
  <nav>
    <a href="/index.html">Home</a>
    <a href="/penalty-shootout.html">Penalty Shoot-out</a>
    <a href="/quicklook-today.html">QuickLook Today</a>
    <a href="/apps/game-card-factory/index.html">Game Card Factory</a>
    <a href="/apps/lineup-card-factory/index.html">Lineup Card Factory</a>
    <a href="/downloads.html">Downloads</a>
    <a href="/contact.html">Contact</a>
    <a href="/privacy.html">Privacy</a>
  </nav>
</header>

<div class="container">

  <h1>Game Card Factory</h1>
  <p class="intro-blurb">
    <strong>Paste a schedule, preview game cards, and generate match report PDFs without a database.</strong>
  </p>

  <!-- ========================= -->
  <!-- Parser Help (Static) -->
  <!-- ========================= -->
  <div class="parser-help-wrapper">
    <div class="parser-help-body" id="parserHelpBody">
      <h4>Available Extractors</h4>
      <div class="parser-help-item"><strong>Text Advanced</strong><br>12-line AYSO block format.</div>
      <div class="parser-help-item"><strong>Arbiter GameView</strong><br>Paste full ArbiterSports “Game Details”.</div>
      <div class="parser-help-item"><strong>Arbiter Email</strong><br>Paste entire ArbiterSports email notification.</div>
      <div class="parser-help-item"><strong>Google Sheets / CSV</strong><br>One row per game.</div>
      <div class="parser-help-item"><strong>Compact</strong><br>Single-line formats.</div>
      <div class="parser-help-item"><strong>AYSO Schedule</strong><br>Region spreadsheet formats.</div>
    </div>
  </div>

 	<!-- ======================= -->
	<!-- 1. Schedule Import -->
	<!-- ======================= -->
	<section class="collapsible-panel" id="section-schedule-import">
	  <button type="button" class="collapsible-header">
		<span class="collapsible-icon">+</span>
		<span class="collapsible-title">1. Import & Extract Schedule</span>
	  </button>

	  <p class="section-subtitle">Paste a schedule and extract game data.</p>

	  <div class="collapsible-body">

		<!-- Parser Selector -->
		<label for="parserSelect">Parser:</label>
		<select id="parserSelect" class="parser-select"></select>

		<!-- Paste Area -->
		<label for="rawInput">Paste Schedule Text:</label>
		<textarea id="rawInput" class="import-textarea" placeholder="Paste schedule text here…"></textarea>

		<!-- Parse Buttons -->
		<div class="button-group">
		  <button id="parseScheduleBtn" class="btn">Extract Games</button>
		  <span id="scheduleParseStatus" class="parse-status">No schedule parsed</span>
		</div>

		<!-- Save Button -->
		<div class="button-group">
		  <button id="saveScheduleBtn" class="btn primary">Save Schedule</button>
		</div>

	  </div>
	</section>
  <!-- ============================ -->
  <!-- 2. Saved Schedule -->
  <!-- ============================ -->
  <section class="collapsible-panel" id="section-schedule">
    <button type="button" class="collapsible-header">
      <span class="collapsible-icon">+</span>
      <span class="collapsible-title">2. Load or Save Schedules</span>
    </button>

    <p class="section-subtitle">Manage saved schedule sets below.</p>
    <div class="collapsible-body">

      <label for="currentScheduleDisplay">Current Schedule:</label>
      <textarea id="currentScheduleDisplay"
		  style="width:66%; height:300px; font-family:monospace; font-size:14px;"
		  readonly
		  placeholder="Parsed games will appear here…"></textarea>

      <div class="schedule-controls">
        <label for="scheduleSelect">Saved Schedules:</label>
        <select id="scheduleSelect"></select>

        <button id="loadScheduleBtn" class="btn">Load</button>
        <button id="deleteScheduleBtn" class="btn secondary">Delete</button>
        <button id="saveScheduleBtn" class="btn primary">Save</button>
      </div>
    </div>
  </section>

  <!-- ========================================================= -->
  <!-- 3. Select & Filter Games -->
  <!-- ========================================================= -->
  <section class="collapsible-panel" id="section-2">
    <button class="collapsible-header">
      <span class="collapsible-icon">+</span>
      <span class="collapsible-title">3. Select & Filter Games</span>
    </button>
    <p class="section-subtitle">Build rules to select or deselect games.</p>

    <div class="collapsible-body">
      <!-- filter UI -->
      <div id="filterRulesContainer" class="filter-rules-container"></div>
      <!-- other filter UI omitted for brevity -->
    </div>
  </section>

<!-- ======================= -->
<!-- 3. Bulk Edit Section -->
<!-- ======================= -->
<section class="collapsible-panel" id="section-3">
  <button type="button" class="collapsible-header">
    <span class="collapsible-icon">+</span>
    <span class="collapsible-title">3. Bulk Edit Selected Cards</span>
  </button>

  <p class="section-subtitle">Edit fields in ALL selected game cards at once.</p>

  <div class="collapsible-body">
    <div class="macos-bulk-panel">

      <!-- Date + Division -->
      <div class="macos-row two-columns">
        <div class="column">
          <label for="bulkDate">Date</label>
          <input id="bulkDate" type="date" class="macos-input">
        </div>
        <div class="column">
          <label for="bulkDivision">Division</label>
          <input id="bulkDivision" type="text" class="macos-input">
        </div>
      </div>

      <!-- Location + Field -->
      <div class="macos-row two-columns">
        <div class="column">
          <label for="bulkLocation">Location</label>
          <input id="bulkLocation" type="text" class="macos-input">
        </div>
        <div class="column">
          <label for="bulkField">Field</label>
          <input id="bulkField" type="text" class="macos-input">
        </div>
      </div>

      <!-- Assigner -->
      <div class="macos-row">
        <label>Assigner Info</label>
        <input id="bulkAssignName" class="macos-input" type="text" placeholder="Name">
        <input id="bulkAssignPhone" class="macos-input" type="text" placeholder="Phone">
        <input id="bulkAssignEmail" class="macos-input" type="text" placeholder="Email">
      </div>

      <!-- Payer -->
      <div class="macos-row">
        <label>Payer Info</label>
        <input id="bulkPayerName" class="macos-input" type="text" placeholder="Name">
        <input id="bulkPayerPhone" class="macos-input" type="text" placeholder="Phone">
        <input id="bulkPayerEmail" class="macos-input" type="text" placeholder="Email">
      </div>

      <!-- Action Buttons -->
      <div class="macos-button-row">
        <button id="applyBulkEditBtn" class="btn">Apply to Selected Games</button>
        <button id="clearBulkEditBtn" class="secondary">Clear Bulk Edit Fields</button>
      </div>

    </div>
  </div>
</section>
  <!-- ========================================================= -->
  <!-- 5. Game Card Preview -->
  <!-- ========================================================= -->
  <section class="collapsible-panel" id="section-4">
    <button class="collapsible-header">
      <span class="collapsible-icon">+</span>
      <span class="collapsible-title">5. Game Card Preview</span>
    </button>

    <div class="collapsible-body">
      <div id="cardsContainer" class="cards-container"></div>
    </div>
  </section>

  <!-- ========================================================= -->
  <!-- 6. Template Select -->
  <!-- ========================================================= -->
  <section class="collapsible-panel" id="section-5">
    <button class="collapsible-header">
      <span class="collapsible-icon">+</span>
      <span class="collapsible-title">6. Choose Report Card Template</span>
    </button>
    <div class="collapsible-body">
      <!-- template UI here -->
    </div>
  </section>

  <!-- ========================================================= -->
  <!-- 7. Generate PDF -->
  <!-- ========================================================= -->
  <section class="collapsible-panel" id="section-6">
    <button class="collapsible-header">
      <span class="collapsible-icon">+</span>
      <span class="collapsible-title">7. Generate PDF Game Cards</span>
    </button>
    <div class="collapsible-body">
      <!-- generate PDF UI here -->
    </div>
  </section>

</div> <!-- /.container -->

<!-- ========================= -->
<!-- Schedule Save Modal -->
<!-- ========================= -->
<div id="scheduleSaveModal" class="modal hidden">
  <div class="modal-content">
    <h3>Save Schedule</h3>
    <input id="scheduleNameInput" placeholder="Schedule name" />
    <div class="modal-buttons">
      <button id="confirmSaveScheduleBtn" class="btn">Save</button>
      <button id="cancelSaveScheduleBtn" class="secondary">Cancel</button>
    </div>
    <p id="scheduleSaveError" class="error-text hidden"></p>
  </div>
</div>

<footer>
  <p>© 2025 Law Five Referee</p>
</footer>

<script type="module" src="js/module-loader.js"></script>
<script async src="//gc.zgo.at/count.js" data-goatcounter="https://law5ref.goatcounter.com/count"></script>

</body>
</html>
